# 過去問活用戦略：著作権を考慮したアプローチ

> 過去問はやりたいが、著作権的に直接使用できない。どうすれば実質的に過去問の価値を提供できるか？

---

## ⚠️ 著作権の問題点

### 過去問をそのまま使う場合
- ❌ 問題文の全文掲載は著作権に抵触する可能性が高い
- ❌ 選択肢のそのままの利用も同様
- ❌ 大学が公開している場合でも、Botでの利用には許可が必要かも

### 一般的な対応
- 問題文は一部のみ引用（著作権法32条）
- オリジナル問題を作成
- 過去問の「傾向」や「分析」は著作権の対象外

---

## ✅ 著作権を回避した過去問活用方法

### 方法1: **傾向分析・頻出データの提供**

過去問の内容ではなく、「傾向」や「データ」を提供する方法

#### 実装例
```
✅ OK: 「早稲田大学では 'abandon' が過去5年で3回出題されています」
✅ OK: 「早稲田の長文読解は平均500語程度です」
✅ OK: 「早稲田でよく出る構文パターン: it is ... that ...」

❌ NG: 実際の問題文をそのまま掲載
```

#### データベース設計
```sql
-- 大学別の頻出単語データ（問題文ではなく、単語の出現頻度）
CREATE TABLE university_word_frequency (
    university_name TEXT,
    word_id INT,
    appearance_count INT,
    years TEXT[],  -- ['2023', '2022', '2021']
    exam_types TEXT[]  -- ['一般入試', '共通テスト']
);

-- 大学別の傾向データ
CREATE TABLE university_exam_trends (
    university_name TEXT,
    average_passage_length INT,
    common_patterns TEXT[],
    difficulty_level TEXT
);
```

---

### 方法2: **オリジナル問題の作成（過去問スタイル）**

過去問の「傾向」や「形式」を分析して、オリジナル問題を作成

#### 実装例
```
「早稲田スタイルの問題」
→ 早稲田の傾向を分析（単語レベル、文章の長さ、構文の難易度）
→ それに基づいてオリジナル問題を作成
→ Dify APIで問題生成
```

#### プロンプト設計
```
「早稲田大学の過去問の傾向:
- 長文: 500-700語程度
- 単語レベル: 難易度中〜高
- 構文: 複雑な構文が多く含まれる
- 設問形式: 内容理解2問、語彙1問程度

この傾向に基づいて、オリジナルの長文読解問題を作成してください」
```

---

### 方法3: **ユーザーが自分で解くサポート機能**

ユーザーが自分で過去問を持っている場合、Botで解く過程をサポート

#### 実装例
```
/過去問サポート "早稲田 2023年"
→ 「この問題を解くためのヒント」
→ 「この問題で重要な単語」
→ 「解いた後、答え合わせと解説」

問題文はユーザーが自分で持っている前提
→ Botはサポート機能のみ提供
```

#### 機能例
- **単語チェッカー**: 問題文の中の単語を分析して、重要な単語を提示
- **構文解析**: 問題文の構文を解析して、難しい部分を解説
- **解答解説**: ユーザーが解答した後、なぜその答えなのかを解説

---

### 方法4: **過去問の一部引用（適法範囲内）**

著作権法32条の「引用」の範囲内で、一部のみ使用

#### 実装例
```
「早稲田大学 2023年の問題から
（引用: '...important that...' の部分のみ）

この構文は何でしょうか？」
```

#### 注意点
- 引用は「必要最小限」に
- 出典を明記
- 引用部分は問題全体のごく一部に
- オリジナル性が高い部分は避ける

---

### 方法5: **過去問の「解説」や「分析」に特化**

問題文は使わず、過去問を解いた後の解説や分析を提供

#### 実装例
```
/過去問解説 早稲田 2023年 第2問
→ 「この問題で重要なポイントは...」
→ 「この問題で使われている構文は...」
→ 「類似問題の解き方...」

問題文は記載せず、解説のみ提供
```

---

## 🎯 推奨アプローチ：組み合わせ戦略

### Phase 1: 傾向分析・頻出データ（即座に実装可能）

```
✅ 「早稲田頻出単語」リスト
✅ 「早稲田でよく出る構文」リスト
✅ 「早稲田の長文読解の傾向」解説
```

**メリット**:
- 著作権問題なし
- すぐに実装できる
- ユーザーに価値を提供できる

**実装**:
- 過去問データを分析（問題文は使わず、単語や構文の出現頻度のみ）
- データベースに保存
- ユーザーが志望校を設定すると、その大学の傾向を表示

---

### Phase 2: オリジナル問題作成（中期実装）

```
✅ 「早稲田スタイルの問題」を自動生成
✅ Dify APIで問題生成時に傾向データを参照
✅ 過去問と似た形式・難易度の問題を作成
```

**メリット**:
- 著作権問題なし
- 無制限に問題を作成できる
- ユーザーのレベルに合わせて調整可能

**実装**:
- Dify APIのプロンプトに「傾向データ」を組み込む
- オリジナル問題を生成
- 「この問題は早稲田スタイルです」と明記

---

### Phase 3: ユーザーサポート機能（長期実装）

```
✅ ユーザーが自分で問題を持っている場合のサポート
✅ 単語チェッカー、構文解析、解説
```

**メリット**:
- 著作権問題なし（問題文はユーザーが持っている）
- 既存の参考書・過去問集と組み合わせて使える

---

## 📊 データ収集方法

### 著作権を考慮したデータ収集

#### 1. 公開されているデータのみ使用
- 大学が公開している過去問（一部のみ引用）
- 参考書や問題集の情報（出典明記）
- 公的な統計データ

#### 2. 分析データのみ使用
- 問題文ではなく、「この単語が何回出たか」というデータ
- 「この構文がよく出る」という傾向
- 難易度や文章の長さなどの統計情報

#### 3. ユーザーからのフィードバック
- ユーザーが「この問題で間違えた」と報告
- それをもとに傾向を分析
- 個人情報は除外

---

## 🗄️ データベース設計（著作権考慮）

### 頻出単語データベース
```sql
-- 問題文は保存せず、単語の出現頻度のみ
CREATE TABLE university_word_frequency (
    id SERIAL PRIMARY KEY,
    university_name TEXT NOT NULL,
    word_id INT REFERENCES words(word_id),
    appearance_count INT DEFAULT 0,
    years TEXT[],  -- 出題された年度
    exam_type TEXT,  -- '一般入試', '共通テスト' など
    created_at TIMESTAMP DEFAULT NOW()
);
```

### 傾向データベース
```sql
-- 問題文ではなく、傾向の情報のみ
CREATE TABLE university_exam_trends (
    id SERIAL PRIMARY KEY,
    university_name TEXT NOT NULL,
    exam_year TEXT,
    average_passage_length INT,
    common_patterns TEXT[],  -- ['it is ... that', 'what ... is ...']
    difficulty_level TEXT,
    source TEXT,  -- データの出典（例: '公式サイト', '参考書X'）
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## 💡 実装の優先順位

### 即座に実装（1週間）
1. **頻出単語データの表示**
   - 「早稲田頻出単語」リスト
   - 問題文は使わず、単語と頻度のみ

2. **傾向データの表示**
   - 「早稲田の長文読解の傾向」
   - 統計情報のみ

### 中期実装（1-2ヶ月）
3. **オリジナル問題生成**
   - 傾向データを基に、Dify APIで問題生成
   - 「早稲田スタイルの問題」として提供

4. **単語の頻出度表示**
   - 単語学習時に「早稲田頻出」と表示

### 長期実装（3-6ヶ月）
5. **ユーザーサポート機能**
   - ユーザーが自分で問題を持っている場合のサポート
   - 単語チェッカー、構文解析

---

## 🔍 データ収集の具体的方法

### 方法1: 公開データの活用
- 大学が公式に公開している過去問の一部のみ使用
- 参考書のデータ（出版社に許可を得る）
- 公的な統計データ

### 方法2: ユーザーからのフィードバック
- ユーザーが「この問題で間違えた」と報告
- それをもとに傾向を分析
- 問題文は含めず、単語や構文のみ

### 方法3: 手動でデータを入力
- 管理画面で手動でデータを入力
- 出典を明記
- 問題文は使わず、傾向のみ

---

## 📝 メッセージ表示例

### 頻出単語表示
```
【早稲田頻出】⭐️⭐️⭐️⭐️⭐️
📘 abandon
→ 早稲田大学で過去5年間に3回出題
→ 年度: 2023, 2021, 2020
```

### 傾向データ表示
```
【早稲田大学 長文読解の傾向】
- 平均語数: 500-700語
- よく出る構文: it is ... that ..., what ... is ...
- 難易度: 中〜高
```

### オリジナル問題
```
【早稲田スタイルの問題】
この問題は早稲田大学の傾向を分析して作成した
オリジナル問題です。

[オリジナル問題文...]
```

---

## ✅ 著作権を考慮したチェックリスト

- [ ] 問題文の全文掲載は避ける
- [ ] 引用は必要最小限に
- [ ] 出典を明記する
- [ ] オリジナル性の高い部分は使わない
- [ ] 傾向データや統計情報に特化
- [ ] ユーザーが自分で問題を持っている前提でサポート
- [ ] 公開データのみ使用
- [ ] 必要に応じて許可を取得

---

## 🚀 推奨される実装方針

### 短期（1週間）
1. ✅ 頻出単語データの表示機能
2. ✅ 傾向データの表示機能

### 中期（1-2ヶ月）
3. ✅ オリジナル問題生成（傾向ベース）
4. ✅ 単語学習時の頻出度表示

### 長期（3-6ヶ月）
5. ✅ ユーザーサポート機能
6. ✅ データ収集の自動化

---

**結論**: 過去問の内容そのものを提供するのではなく、「傾向分析」や「頻出データ」に特化し、オリジナル問題を作成することで、著作権問題を回避しながら実質的に過去問の価値を提供できる。
